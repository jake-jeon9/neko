
local categoryList = 11
local list = {}
for i=1, categoryList do
	list[i] = {dataID = {}, guide = {}, count = {}, chance = {}, gold = {}, explain = {}}
end
list[1].dataID[1] = 25
list[1].guide[1] = {15, 24}
list[1].count[1] = {3, 1}
list[1].chance[1] = 4
list[1].gold[1] = 100

list[1].dataID[2] = 25
list[1].guide[2] = {24}
list[1].count[2] = {5}
list[1].chance[2] = 25
list[1].gold[2] = 100

list[1].dataID[3] = 25
list[1].guide[3] = {37, 24}
list[1].count[3] = {3, 1}
list[1].chance[3] = 100
list[1].gold[3] = 100

list[1].dataID[4] = 26
list[1].guide[4] = {15, 25}
list[1].count[4] = {4, 1}
list[1].chance[4] = 3
list[1].gold[4] = 100

list[1].dataID[5] = 26
list[1].guide[5] = {25}
list[1].count[5] = {5}
list[1].chance[5] = 20
list[1].gold[5] = 100

list[1].dataID[6] = 28
list[1].guide[6] = {15, 26}
list[1].count[6] = {4, 1}
list[1].chance[6] = 2
list[1].gold[6] = 100

list[1].dataID[7] = 28
list[1].guide[7] = {26}
list[1].count[7] = {5}
list[1].chance[7] = 15
list[1].gold[7] = 100

list[1].dataID[8] = 210
list[1].guide[8] = {24, 58}
list[1].count[8] = {3, 3}
list[1].chance[8] = 5
list[1].gold[8] = 100

list[1].dataID[9] = 211
list[1].guide[9] = {210, 36, 15}
list[1].count[9] = {1, 1, 1}
list[1].chance[9] = 15
list[1].gold[9] = 100

list[1].dataID[10] = 212
list[1].guide[10] = {211, 36, 15, 143}
list[1].count[10] = {1, 1, 1, 3}
list[1].chance[10] = 15
list[1].gold[10] = 100

list[1].dataID[11] = 213
list[1].guide[11] = {212, 37, 15, 141, 142}
list[1].count[11] = {1, 1, 1, 2, 2}
list[1].chance[11] = 5
list[1].gold[11] = 100

list[2].dataID[1] = 35
list[2].guide[1] = {34}
list[2].count[1] = {5}
list[2].chance[1] = 100
list[2].gold[1] = 100

list[2].dataID[2] = 36
list[2].guide[2] = {35}
list[2].count[2] = {5}
list[2].chance[2] = 100
list[2].gold[2] = 100

list[2].dataID[3] = 38
list[2].guide[3] = {36}
list[2].count[3] = {5}
list[2].chance[3] = 100
list[2].gold[3] = 100

list[2].dataID[4] = 37
list[2].guide[4] = {38}
list[2].count[4] = {5}
list[2].chance[4] = 100
list[2].gold[4] = 100

list[3].dataID[1] = 180
list[3].guide[1] = {130, 120}
list[3].count[1] = {1, 1}
list[3].chance[1] = 20
list[3].gold[1] = 100

list[3].dataID[2] = 180
list[3].guide[2] = {130, 120, 35}
list[3].count[2] = {1, 1, 1}
list[3].chance[2] = 30
list[3].gold[2] = 100

list[3].dataID[3] = 180
list[3].guide[3] = {130, 120, 36}
list[3].count[3] = {1, 1, 1}
list[3].chance[3] = 50
list[3].gold[3] = 100

list[3].dataID[4] = 180
list[3].guide[4] = {130, 120, 38}
list[3].count[4] = {1, 1, 1}
list[3].chance[4] = 80
list[3].gold[4] = 100

list[3].dataID[5] = 180
list[3].guide[5] = {130, 120, 37}
list[3].count[5] = {1, 1, 1}
list[3].chance[5] = 100
list[3].gold[5] = 100

list[3].dataID[6] = 181
list[3].guide[6] = {130, 120}
list[3].count[6] = {1, 1}
list[3].chance[6] = 20
list[3].gold[6] = 100

list[3].dataID[7] = 181
list[3].guide[7] = {130, 120, 35}
list[3].count[7] = {1, 1, 1}
list[3].chance[7] = 30
list[3].gold[7] = 100

list[3].dataID[8] = 181
list[3].guide[8] = {130, 120, 36}
list[3].count[8] = {1, 1, 1}
list[3].chance[8] = 50
list[3].gold[8] = 100

list[3].dataID[9] = 181
list[3].guide[9] = {130, 120, 38}
list[3].count[9] = {1, 1, 1}
list[3].chance[9] = 80
list[3].gold[9] = 100

list[3].dataID[10] = 181
list[3].guide[10] = {130, 120, 37}
list[3].count[10] = {1, 1, 1}
list[3].chance[10] = 100
list[3].gold[10] = 100

list[3].dataID[11] = 184
list[3].guide[11] = {130, 120}
list[3].count[11] = {1, 1}
list[3].chance[11] = 20
list[3].gold[11] = 100

list[3].dataID[12] = 184
list[3].guide[12] = {130, 120, 35}
list[3].count[12] = {1, 1, 1}
list[3].chance[12] = 30
list[3].gold[12] = 100

list[3].dataID[13] = 184
list[3].guide[13] = {130, 120, 36}
list[3].count[13] = {1, 1, 1}
list[3].chance[13] = 50
list[3].gold[13] = 100

list[3].dataID[14] = 184
list[3].guide[14] = {130, 120, 38}
list[3].count[14] = {1, 1, 1}
list[3].chance[14] = 80
list[3].gold[14] = 100

list[3].dataID[15] = 184
list[3].guide[15] = {130, 120, 37}
list[3].count[15] = {1, 1, 1}
list[3].chance[15] = 100
list[3].gold[15] = 100

list[3].dataID[16] = 185
list[3].guide[16] = {130, 120}
list[3].count[16] = {1, 1}
list[3].chance[16] = 20
list[3].gold[16] = 100

list[3].dataID[17] = 185
list[3].guide[17] = {130, 120, 35}
list[3].count[17] = {1, 1, 1}
list[3].chance[17] = 30
list[3].gold[17] = 100

list[3].dataID[18] = 185
list[3].guide[18] = {130, 120, 36}
list[3].count[18] = {1, 1, 1}
list[3].chance[18] = 50
list[3].gold[18] = 100

list[3].dataID[19] = 185
list[3].guide[19] = {130, 120, 38}
list[3].count[19] = {1, 1, 1}
list[3].chance[19] = 80
list[3].gold[19] = 100

list[3].dataID[20] = 185
list[3].guide[20] = {130, 120, 37}
list[3].count[20] = {1, 1, 1}
list[3].chance[20] = 100
list[3].gold[20] = 100

list[3].dataID[21] = 182
list[3].guide[21] = {130, 120}
list[3].count[21] = {1, 1}
list[3].chance[21] = 20
list[3].gold[21] = 100

list[3].dataID[22] = 182
list[3].guide[22] = {130, 120, 35}
list[3].count[22] = {1, 1, 1}
list[3].chance[22] = 30
list[3].gold[22] = 100

list[3].dataID[23] = 182
list[3].guide[23] = {130, 120, 36}
list[3].count[23] = {1, 1, 1}
list[3].chance[23] = 50
list[3].gold[23] = 100

list[3].dataID[24] = 182
list[3].guide[24] = {130, 120, 38}
list[3].count[24] = {1, 1, 1}
list[3].chance[24] = 80
list[3].gold[24] = 100

list[3].dataID[25] = 182
list[3].guide[25] = {130, 120, 37}
list[3].count[25] = {1, 1, 1}
list[3].chance[25] = 100
list[3].gold[25] = 100

list[3].dataID[26] = 183
list[3].guide[26] = {130, 120}
list[3].count[26] = {1, 1}
list[3].chance[26] = 20
list[3].gold[26] = 100

list[3].dataID[27] = 183
list[3].guide[27] = {130, 120, 35}
list[3].count[27] = {1, 1, 1}
list[3].chance[27] = 30
list[3].gold[27] = 100

list[3].dataID[28] = 183
list[3].guide[28] = {130, 120, 36}
list[3].count[28] = {1, 1, 1}
list[3].chance[28] = 50
list[3].gold[28] = 100

list[3].dataID[29] = 183
list[3].guide[29] = {130, 120, 38}
list[3].count[29] = {1, 1, 1}
list[3].chance[29] = 80
list[3].gold[29] = 100

list[3].dataID[30] = 183
list[3].guide[30] = {130, 120, 37}
list[3].count[30] = {1, 1, 1}
list[3].chance[30] = 100
list[3].gold[30] = 100

list[4].dataID[1] = 309
list[4].guide[1] = {308}
list[4].count[1] = {1}
list[4].chance[1] = 100
list[4].gold[1] = 100

list[4].dataID[2] = 310
list[4].guide[2] = {308}
list[4].count[2] = {2}
list[4].chance[2] = 100
list[4].gold[2] = 100

list[4].dataID[3] = 311
list[4].guide[3] = {308}
list[4].count[3] = {3}
list[4].chance[3] = 100
list[4].gold[3] = 100

list[4].dataID[4] = 312
list[4].guide[4] = {308}
list[4].count[4] = {4}
list[4].chance[4] = 100
list[4].gold[4] = 100

list[4].dataID[5] = 313
list[4].guide[5] = {308}
list[4].count[5] = {5}
list[4].chance[5] = 100
list[4].gold[5] = 100

list[5].dataID[1] = 186
list[5].guide[1] = {170, 171, 130}
list[5].count[1] = {1, 1, 1}
list[5].chance[1] = 10
list[5].gold[1] = 100

list[5].dataID[2] = 187
list[5].guide[2] = {172, 173, 130}
list[5].count[2] = {1, 1, 1}
list[5].chance[2] = 10
list[5].gold[2] = 100

list[5].dataID[3] = 70
list[5].guide[3] = {139, 140, 141, 38}
list[5].count[3] = {5, 5, 5, 1}
list[5].chance[3] = 2
list[5].gold[3] = 100

list[5].dataID[4] = 193
list[5].guide[4] = {186, 36, 15, 140}
list[5].count[4] = {1, 1, 1, 1}
list[5].chance[4] = 10
list[5].gold[4] = 100

list[5].dataID[5] = 194
list[5].guide[5] = {187, 36, 15, 140}
list[5].count[5] = {1, 1, 1, 1}
list[5].chance[5] = 10
list[5].gold[5] = 100

list[5].dataID[6] = 188
list[5].guide[6] = {139, 140, 141, 14}
list[5].count[6] = {1, 1, 1, 5}
list[5].chance[6] = 10
list[5].gold[6] = 100

list[5].dataID[7] = 195
list[5].guide[7] = {188, 139, 140, 141}
list[5].count[7] = {1, 1, 1, 1}
list[5].chance[7] = 10
list[5].gold[7] = 100

list[5].dataID[8] = 71
list[5].guide[8] = {139, 140, 141, 38}
list[5].count[8] = {5, 5, 5, 1}
list[5].chance[8] = 2
list[5].gold[8] = 100

list[5].dataID[9] = 72
list[5].guide[9] = {139, 140, 141, 38}
list[5].count[9] = {5, 5, 5, 1}
list[5].chance[9] = 2
list[5].gold[9] = 100

list[5].dataID[10] = 230
list[5].guide[10] = {144, 15, 22}
list[5].count[10] = {100, 1, 100}
list[5].chance[10] = 5
list[5].gold[10] = 100

list[5].dataID[11] = 231
list[5].guide[11] = {144, 15, 22}
list[5].count[11] = {100, 1, 100}
list[5].chance[11] = 5
list[5].gold[11] = 100

list[5].dataID[12] = 232
list[5].guide[12] = {144, 15, 22}
list[5].count[12] = {100, 1, 100}
list[5].chance[12] = 5
list[5].gold[12] = 100

list[5].dataID[13] = 233
list[5].guide[13] = {144, 15, 22}
list[5].count[13] = {100, 1, 100}
list[5].chance[13] = 5
list[5].gold[13] = 100

list[5].dataID[14] = 234
list[5].guide[14] = {144, 15, 22}
list[5].count[14] = {100, 1, 100}
list[5].chance[14] = 5
list[5].gold[14] = 100

list[5].dataID[15] = 235
list[5].guide[15] = {144, 15, 22}
list[5].count[15] = {100, 1, 100}
list[5].chance[15] = 5
list[5].gold[15] = 100

list[5].dataID[16] = 272
list[5].guide[16] = {1, 2, 15}
list[5].count[16] = {1, 1, 2}
list[5].chance[16] = 3
list[5].gold[16] = 100

list[5].dataID[17] = 48
list[5].guide[17] = {47, 35}
list[5].count[17] = {1, 2}
list[5].chance[17] = 3
list[5].gold[17] = 100

list[6].dataID[1] = 8
list[6].guide[1] = {10}
list[6].count[1] = {10}
list[6].chance[1] = 100
list[6].gold[1] = 100

list[6].dataID[2] = 9
list[6].guide[2] = {8}
list[6].count[2] = {10}
list[6].chance[2] = 100
list[6].gold[2] = 100

list[7].dataID[1] = 711
list[7].guide[1] = {701, 35, 719, 720}
list[7].count[1] = {1, 1, 1, 1}
list[7].chance[1] = 80
list[7].gold[1] = 100

list[7].dataID[2] = 712
list[7].guide[2] = {706, 35, 723, 724}
list[7].count[2] = {1, 1, 1, 1}
list[7].chance[2] = 80
list[7].gold[2] = 100

list[7].dataID[3] = 713
list[7].guide[3] = {708, 35, 727, 728}
list[7].count[3] = {1, 1, 1, 1}
list[7].chance[3] = 80
list[7].gold[3] = 100

function openItemCreate()
	local category
	local sel
	local mask = Panel(Rect(0, 0, Client.width, Client.height))
	mask.SetOpacity(155)
	mask.showOnTop = true

	local panel = Image("Pictures/itemCreate_panel.png", Rect(Client.width/2-309, 90, 618, 241))
	local closeButton = Button("", Rect(618-6-23, 4, 23, 23))
	closeButton.AddChild(Image("Pictures/CloseButton.png", Rect(0, 0, 23, 23)))
	closeButton.SetOpacity(0)
	closeButton.onClick.Add(function()
		mask.Destroy()
	end)

	local createButtonImage = Image("Pictures/item_createButton.png", Rect(416, 170, 94, 43))
	local createButton = Button("", Rect(416, 170, 94, 43))
	createButton.SetOpacity(0)
	createButton.onClick.Add(function()
		createButtonImage.SetImage("Pictures/item_createButton_press.png")
		Client.RunLater(function()
			createButtonImage.SetImage("Pictures/item_createButton.png")
			if sel ~= nil then
				local a = {}
				a.sel = sel
				a.category = category
				Client.FireEvent("create_postSel", Utility.JSONSerialize(a))
			end
		end,0.1)
	end)

	local guideChanceText = Text("", Rect(335, 120, 136, 32))
	local guideGoldText = Text("", Rect(335, 104, 186, 32))

	panel.AddChild(guideGoldText)
	panel.AddChild(guideChanceText)
	panel.AddChild(createButtonImage)
	panel.AddChild(createButton)
	panel.AddChild(closeButton)
	mask.AddChild(panel)

	local guideListImage = {}
	local guideListText = {}
	local guideListText1 = {}
	local guideListText2 = {}
	local guideListText3 = {}
	local guideListText4 = {}
	for i=1, 6 do
		guideListImage[i] = Image("Pictures/투명.png", Rect(328+((i-1)*32)+((i-1)*13), 64, 32, 32))
		guideListText[i] = Text("", Rect(335+((i-1)*32)+((i-1)*13)+10, 74, 32, 32))
		guideListText1[i] = Text("", Rect(334+((i-1)*32)+((i-1)*13)+10, 73, 32, 32))
		guideListText2[i] = Text("", Rect(334+((i-1)*32)+((i-1)*13)+10, 75, 32, 32))
		guideListText3[i] = Text("", Rect(336+((i-1)*32)+((i-1)*13)+10, 73, 32, 32))
		guideListText4[i] = Text("", Rect(336+((i-1)*32)+((i-1)*13)+10, 75, 32, 32))
		panel.AddChild(guideListImage[i])
		panel.AddChild(guideListText1[i])
		panel.AddChild(guideListText2[i])
		panel.AddChild(guideListText3[i])
		panel.AddChild(guideListText4[i])
		panel.AddChild(guideListText[i])
	end

	local panelList = {}
	local scrollPanel
	local function refresh(number)
		guideGoldText.text = ""
		guideChanceText.text = ""
		for i=1, 6 do
			guideListImage[i].SetImage("Pictures/투명.png")
			guideListText[i].text = ""
			guideListText1[i].text = ""
			guideListText2[i].text = ""
			guideListText3[i].text = ""
			guideListText4[i].text = ""
		end

		sel = nil
		category = number
		if scrollPanel ~= nil then
			scrollPanel.Destroy()
		end
		scrollPanel = ScrollPanel(Rect(19, 50, 261, 175))
		scrollPanel.SetOpacity(0)

		local board = Panel(Rect(0, 0, 261, #list[number].dataID*38+((#list[number].dataID-1)*6)))
		board.SetOpacity(0)
		scrollPanel.content = board
		scrollPanel.horizontal = false
		scrollPanel.AddChild(board)

		for i=1, #list[number].dataID do
			panelList[i] = Panel(Rect(0, ((i-1)*38)+((i-1)*6), 261, 38))
			local img = Image("", Rect(3, 3, 32, 32))
			img.SetImageID(Client.GetItem(list[number].dataID[i]).imageID)
			panelList[i].AddChild(img)
			panelList[i].AddChild(Text("<color=#C67D17>"..Client.GetItem(list[number].dataID[i]).name.."</color>", Rect(49, 2, 150, 32)))
			panelList[i].AddChild(Text("<color=#C67D17>"..Client.GetItem(list[number].dataID[i]).name.."</color>", Rect(49, 4, 150, 32)))
			panelList[i].AddChild(Text("<color=#C67D17>"..Client.GetItem(list[number].dataID[i]).name.."</color>", Rect(51, 2, 150, 32)))
			panelList[i].AddChild(Text("<color=#C67D17>"..Client.GetItem(list[number].dataID[i]).name.."</color>", Rect(51, 4, 150, 32)))
			panelList[i].AddChild(Text("<color=#FFFFFF>"..Client.GetItem(list[number].dataID[i]).name.."</color>", Rect(50, 3, 150, 32)))
			local button = Button("", Rect(0, 0, 261, 38))
			button.SetOpacity(0)
			button.onClick.Add(function()
				if sel ~= i then
					sel = i

					for i2=1, 6 do
						guideListImage[i2].SetImage("Pictures/투명.png")
						guideListText[i2].text = ""
						guideListText1[i2].text = ""
						guideListText2[i2].text = ""
						guideListText3[i2].text = ""
						guideListText4[i2].text = ""
					end

					for i2=1, #list[number].guide[i] do

						if Client.GetItem(list[number].guide[i][i2]).imageID ~= "" then
							guideListImage[i2].SetImageID(Client.GetItem(list[number].guide[i][i2]).imageID)
						else
							guideListImage[i2].SetImage("Pictures/투명.png")
						end
						guideListText[i2].text = list[number].count[i][i2]
						guideListText1[i2].text = "<color=#C67D17>"..list[number].count[i][i2].."</color>"
						guideListText2[i2].text = "<color=#C67D17>"..list[number].count[i][i2].."</color>"
						guideListText3[i2].text = "<color=#C67D17>"..list[number].count[i][i2].."</color>"
						guideListText4[i2].text = "<color=#C67D17>"..list[number].count[i][i2].."</color>"

					end
					guideGoldText.text = "<color=#FFFFFF>필요 금액 : "..list[number].gold[i].." BN</color>"
					guideChanceText.text = "<color=#FFFFFF>성공 확률 : "..list[number].chance[i].."%</color>"
				else
					if list[number].explain[i] ~= nil then
						local maskButton = Button("", Rect(0, 0, Client.width, Client.height))
						maskButton.showOnTop = true
						maskButton.SetOpacity(0)
						maskButton.onClick.Add(function()
							maskButton.Destroy()
						end)

						local itemPanel = Panel(Rect(Client.width/2-100, Client.height/2-80, 200, 160))
						itemPanel.SetOpacity(205)
						local itemExplain = Text("", Rect(50, 0, 200, 160))
						itemExplain.text = list[number].explain[i]
						itemPanel.AddChild(itemExplain)
						maskButton.AddChild(itemPanel)
					end
				end
			end)
			panelList[i].AddChild(button)
			board.AddChild(panelList[i])
		end
		panel.AddChild(scrollPanel)
	end
	refresh(1)

	local categoryButton = {}
	for i=1, categoryList do
		categoryButton[i] = Button("", Rect(((i-1)*52), 0, 52, 30))
		categoryButton[i].AddChild(Image("Pictures/item_category_"..i..".png", Rect(0, 0, 52, 30)))
		categoryButton[i].onClick.Add(function()
			sel = nil
			category = i
			refresh(category)
		end)
		panel.AddChild(categoryButton[i])
	end

end
